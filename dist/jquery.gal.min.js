var libs=function(){return{deepExt:function(a){for(var b in a)"object"==typeof a[b]?(this[b]||(this[b]={}),libs.deepExt.apply(this[b],[a[b]])):this[b]=a[b]},addToSessionStorage:function(a,b){var c=null===sessionStorage.getItem(a)?[]:sessionStorage.getItem(a);c+=b+";",sessionStorage.setItem(a,c)},removeFromLocalStorage:function(a,b){var c=null===sessionStorage.getItem(a)?[]:sessionStorage.getItem(a),d=c.split(";");d.splice(b,1),sessionStorage.setItem(a,d.join(";"))}}}();function isOverTheList(a,b){"use strict";return a.pageX>=b.offset().left+parseInt(b.css("padding-left"),10)&&a.pageX<=b.offset().left+parseInt(b.css("width"),10)+parseInt(b.css("padding-left"),10)&&a.pageY>=b.offset().top&&a.pageY<=b.offset().top+parseInt(b.css("height"),10)}(function(a){"use strict";function b(a,b){c.imgAnim||(c.imgAnim=!0,a[0].style.transition="all .5s ease-in",a[0].style.filter="blur(20px)",a.animate({opacity:0},250,()=>{a[0].style.filter="blur(0px)",a.attr("src",b)}).animate({opacity:1},250,()=>{c.imgAnim=!1}))}const c={imgAnim:!1};a.fn.gal=function(c){let d={},e=this,f=null,g=null;libs.deepExt.apply(d,[a.fn.gal.defaults]),libs.deepExt.apply(d,[c]),sessionStorage.removeItem("imgList");for(let b=0;b<c.nrOfImgs;b++)f=a("<img />"),f.attr("src",c.imagesDir+"0"+(b+1)+".jpg"),this.append(f),f=null;this.children("img").wrap("<div></div>"),this.addClass("gal_scene"),this.find("div>img").addClass("gal_img");let h=a("<img />").attr({src:"img/gal_close.png",width:"25px"}).data({gal_close:!0}).addClass("gal_close"),i=a("<img />").attr({src:"img/gal_maximize.png",width:"30px",class:"gal_maximize"}),j=a("<img />").attr({src:"img/gal_left.png",width:"30px",class:"gal_left"}),k=a("<img />").attr({src:"img/gal_right.png",width:"30px",class:"gal_right"}),l=a("div.gal_scene").find("div"),m=a("ul#gal_list"),n=a(".gal_enlarged"),o=a("<div class=\"gal_topEnlarged\"></div>").on("mousedown",function(b){a(this).data("msdown",!0).data("position",{X:b.pageX,Y:b.pageY})}).on("mouseup",function(b){if(a(this).data("msdown",!1),isOverTheList(b,m)&&"img/gal_maximize.png"===a(this).parent().find(".gal_maximize").attr("src")){let b=a(this).parent().find(".gal_img").attr("src"),c=a("<li></li>"),d=a("<button class=\"gal_button\"/>").on("click",function(){a(this).parent().animate({opacity:"0",width:"0px"},500,function(){libs.removeFromLocalStorage("imgList",a(this).index()),a(this).remove()})});d.html("remove"),c.html(b);let e=a("<img />").attr("src",b);e.attr("width","80px"),c.append(e),c.append(d),m.append(c),libs.addToSessionStorage("imgList",b),h.trigger("click"),n.css({"background-color":"transparent"}).animate({left:m.offset().left+"px",top:m.offset().top+"px",width:m.css("width")},()=>{h.trigger("click")})}});a("body").on("mousemove",b=>{var c=Math.sign;if(o.data("msdown")){let d=b.pageX-o.data("position").X,e=b.pageY-o.data("position").Y;o.data("position",{X:b.pageX,Y:b.pageY}),a(".gal_enlarged").animate({left:"+="+(d+0*c(d)),top:"+="+(e+0*c(e))},15),b.pageY>window.innerHeight-50&&m[0].scrollIntoView({behavior:"smooth"})}b.stopPropagation(),b.bubbles=!1});let p=l.length,q=parseInt(e.css("width"),10),r=5<p?140:parseInt(q/p,10)-10;return a("img.gal_img").css({opacity:d.mouseOut.opacity}),g=!1,l.children("img").css({width:`${r-10}px`}).on("mouseover",function(){a(this).animate({opacity:1},500)}).on("mouseout",function(){a(this).animate({opacity:d.mouseoutOpacity},500)}),l.addClass("gal_button").css({width:r}).on("click",function(){if(g)return;g=!0;let c=a(this),f=a(this).html();a(this).fadeTo(500,.3).clone().empty().css({width:"0px",height:"0px","background-color":d.openProp["background-color"],left:parseInt(e.css("width"),10)/2-6+"px"}).appendTo(e).addClass("gal_enlarged").addClass("gal_clearfix").animate({width:"400px",height:"240px",left:`50px`,top:`${window.pageYOffset+30}px`},d.openProp.speed,function(){a(this).html(f).fadeTo(0,0).fadeTo(500,1,function(){let b=a(this).find(".gal_img");b.data("scale","1"),b.data("left","0"),b.data("top","0"),a(this).css({"background-color":"transparent"}).children("img.gal_img").wrap("<div class=\"gal_imgWrapper\"></div>").css({opacity:1}).on("click",a=>{b.css({cursor:"zoom-in"});let c=parseInt(b.data("scale")),d=parseInt(b.data("left")),e=parseInt(b.data("top"));c*=1.5;let f=a.clientX,g=a.clientY;return 40>f?(d+=10,b.data("left",d),void b.css({transform:`translate(${d}px,${e}px)`,transition:"all .2s ease-in"})):80>g?(e+=10,b.data("top",e),void b.css({transform:`translate(${d}px,${e}px)`,transition:"all .2s ease-in"})):void(5<c&&(c=5),b.data("scale",1.5*c),b.css({transform:`scale(${c}) translate(${.2*-f}px,${.2*-g}px)`,transition:"all .5s ease-in"}))}).on("contextmenu",a=>{b.css({cursor:"zoom-out"});let c=.67*parseInt(b.data("scale"));1>c&&(c=1),b.data("scale",c),b.css({transform:`scale(${c})`}),a.preventDefault()})}).prepend(o).prepend(j).on("click",function(d){if(a(d.target).hasClass("gal_left")){let d=c.prev();if(d!==c){let e=d.children("img").attr("src");if(void 0!==e){let f=a(this).find("img.gal_img");b(f,e),c=d}}}}).prepend(k).on("click",function(d){if(!a(d.target).hasClass("gal_right"))return;let e=c.next();if(e.hasClass("gal_enlarged"))return;let f=e.children("img.gal_img").attr("src"),g=a(this).find("img.gal_img");void 0!==f&&(b(g,f),c=e)}).prepend(i).prepend(h).on("click",function(b){return!!a(b.target).hasClass("gal_close")&&(i.attr("src","img/gal_maximize.png"),b.bubbles=!1,a(this).fadeOut(500),c.fadeTo(500,1),g=!1,b.stopPropagation(),!1)}).children("img.gal_img").css({width:"100%"})}).children(".gal_leftButton").css({color:"red",height:parseInt(a(".gal_enlarged").find("img:eq(3)").css("height"),10)+"px"})}),i.on("click",()=>{0<a(this).find(".gal_maximize")[0].src.indexOf("maximize")?(a(".gal_enlarged").animate({width:"98vw",height:"100%",left:"0px"}),a(this).find(".gal_maximize")[0].src="img/gal_minimize.png"):(a(".gal_enlarged").animate({width:"400px",height:"240px",left:"40px"}),a(this).find(".gal_maximize")[0].src="img/gal_maximize.png")}),this},a.fn.gal.defaults={enlarge:a.fn.fadeTo,openSpeed:500,openbg:"#777777",mouseoutOpacity:.7,mouseOut:{opacity:.7},openProp:{speed:500,css:{opacity:.7},"background-color":"#777777"}}})(jQuery);